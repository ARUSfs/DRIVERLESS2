<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Driverless 2: Utils Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Driverless 2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Utils Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a608edc26ec08b8d2ddd8f5c4cb53f78d" id="r_a608edc26ec08b8d2ddd8f5c4cb53f78d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#a608edc26ec08b8d2ddd8f5c4cb53f78d">get_clusters_centers</a> (std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *cluster_clouds, std::vector&lt; pcl::PointXYZI &gt; *clusters_centers)</td></tr>
<tr class="memdesc:a608edc26ec08b8d2ddd8f5c4cb53f78d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the center of each cluster.  <br /></td></tr>
<tr class="separator:a608edc26ec08b8d2ddd8f5c4cb53f78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e19df2b69bce738606b4d7a42b732bb" id="r_a3e19df2b69bce738606b4d7a42b732bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#a3e19df2b69bce738606b4d7a42b732bb">filter_clusters</a> (std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *cluster_clouds, std::vector&lt; pcl::PointXYZI &gt; *clusters_centers, double min_height=0.10, double max_height=0.4, double max_width=0.5, double top_z=1.0)</td></tr>
<tr class="memdesc:a3e19df2b69bce738606b4d7a42b732bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter the final clusters by size to delete the ones that are too small or too large to be considered cones.  <br /></td></tr>
<tr class="separator:a3e19df2b69bce738606b4d7a42b732bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a38cc6704d6a2d8005ba4ee91852f5" id="r_ab6a38cc6704d6a2d8005ba4ee91852f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#ab6a38cc6704d6a2d8005ba4ee91852f5">reconstruction</a> (pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr cloud_plane, std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *cluster_clouds, std::vector&lt; pcl::PointXYZI &gt; *clusters_centers, double radius)</td></tr>
<tr class="memdesc:ab6a38cc6704d6a2d8005ba4ee91852f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recover falsely ground filtered points.  <br /></td></tr>
<tr class="separator:ab6a38cc6704d6a2d8005ba4ee91852f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1371239b03263e524107115fb35d8abc" id="r_a1371239b03263e524107115fb35d8abc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#a1371239b03263e524107115fb35d8abc">motion_correction</a> (pcl::PointCloud&lt; <a class="el" href="structPointXYZColorScore.html">PointXYZColorScore</a> &gt;::Ptr cloud, double vx, double vy, double yaw_rate, double dt)</td></tr>
<tr class="memdesc:a1371239b03263e524107115fb35d8abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Correct the motion of the points in the final map.  <br /></td></tr>
<tr class="separator:a1371239b03263e524107115fb35d8abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd0223b3bcd872ec13a3dbfbda3f27a" id="r_a8cd0223b3bcd872ec13a3dbfbda3f27a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#a8cd0223b3bcd872ec13a3dbfbda3f27a">ground_align</a> (pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &amp;cloud, pcl::ModelCoefficients::Ptr &amp;coefficients)</td></tr>
<tr class="separator:a8cd0223b3bcd872ec13a3dbfbda3f27a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d073d9a45043da450c423994761cb9e" id="r_a4d073d9a45043da450c423994761cb9e"><td class="memTemplParams" colspan="2">template&lt;typename ArgType , typename ValType &gt; </td></tr>
<tr class="memitem:a4d073d9a45043da450c423994761cb9e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#a4d073d9a45043da450c423994761cb9e">ReadFunction</a> (std::istream &amp;_in, ArgType *&amp;_x, ValType *&amp;_y, int *&amp;_n, int _dimensions=1, int _multiplicity=1)</td></tr>
<tr class="separator:a4d073d9a45043da450c423994761cb9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab562f18f1406da1ae9ac231637e6e866" id="r_ab562f18f1406da1ae9ac231637e6e866"><td class="memTemplParams" colspan="2">template&lt;typename ArgType , typename ValType &gt; </td></tr>
<tr class="memitem:ab562f18f1406da1ae9ac231637e6e866"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceUtils.html#ab562f18f1406da1ae9ac231637e6e866">ReadFunction</a> (std::istream &amp;_in, ArgType *&amp;_x, ValType *&amp;_y, int &amp;_n, int _dimensions=1, int _multiplicity=1)</td></tr>
<tr class="separator:ab562f18f1406da1ae9ac231637e6e866"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3e19df2b69bce738606b4d7a42b732bb" name="a3e19df2b69bce738606b4d7a42b732bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e19df2b69bce738606b4d7a42b732bb">&#9670;&#160;</a></span>filter_clusters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Utils::filter_clusters </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *&#160;</td>
          <td class="paramname"><em>cluster_clouds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pcl::PointXYZI &gt; *&#160;</td>
          <td class="paramname"><em>clusters_centers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_height</em> = <code>0.10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_height</em> = <code>0.4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_width</em> = <code>0.5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>top_z</em> = <code>1.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter the final clusters by size to delete the ones that are too small or too large to be considered cones. </p>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00045">45</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>    {</div>
<div class="line"><span class="lineno">   49</span>        <span class="comment">// Inverse loop to erase safely</span></div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>) cluster_clouds-&gt;size() - 1; i &gt;= 0; --i) {</div>
<div class="line"><span class="lineno">   51</span>            <span class="keyword">auto</span> cluster = (*cluster_clouds)[i];</div>
<div class="line"><span class="lineno">   52</span>            <span class="keywordflow">if</span> (!cluster || cluster-&gt;empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>            <span class="comment">// Obtain the new bounding box of the cluster</span></div>
<div class="line"><span class="lineno">   55</span>            pcl::PointXYZI min_point, max_point;</div>
<div class="line"><span class="lineno">   56</span>            pcl::getMinMax3D(*cluster, min_point, max_point);</div>
<div class="line"><span class="lineno">   57</span>            <span class="keywordtype">double</span> height = max_point.z - min_point.z;</div>
<div class="line"><span class="lineno">   58</span>            <span class="keywordtype">double</span> width_x = max_point.x - min_point.x;</div>
<div class="line"><span class="lineno">   59</span>            <span class="keywordtype">double</span> width_y = max_point.y - min_point.y;</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>            <span class="comment">// Filter the cluster by size and keep the center of the cluster</span></div>
<div class="line"><span class="lineno">   62</span>            <span class="keywordflow">if</span> (height &lt; min_height || height &gt; max_height || width_x &gt; max_width || width_y &gt; max_width || max_point.z &gt; top_z)</div>
<div class="line"><span class="lineno">   63</span>            {</div>
<div class="line"><span class="lineno">   64</span>                clusters_centers-&gt;erase(clusters_centers-&gt;begin() + i);</div>
<div class="line"><span class="lineno">   65</span>                cluster_clouds-&gt;erase(cluster_clouds-&gt;begin() + i);</div>
<div class="line"><span class="lineno">   66</span>            }</div>
<div class="line"><span class="lineno">   67</span>        }</div>
<div class="line"><span class="lineno">   68</span>    </div>
<div class="line"><span class="lineno">   69</span>        <span class="comment">// Resize the vectors</span></div>
<div class="line"><span class="lineno">   70</span>        cluster_clouds-&gt;resize(clusters_centers-&gt;size());</div>
<div class="line"><span class="lineno">   71</span>        clusters_centers-&gt;resize(clusters_centers-&gt;size());</div>
<div class="line"><span class="lineno">   72</span>    }</div>
</div><!-- fragment --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_a3e19df2b69bce738606b4d7a42b732bb_icgraph.png" border="0" usemap="#anamespaceUtils_a3e19df2b69bce738606b4d7a42b732bb_icgraph" alt=""/></div>
<map name="anamespaceUtils_a3e19df2b69bce738606b4d7a42b732bb_icgraph" id="anamespaceUtils_a3e19df2b69bce738606b4d7a42b732bb_icgraph">
<area shape="rect" title="Filter the final clusters by size to delete the ones that are too small or too large to be considered..." alt="" coords="681,31,829,56"/>
<area shape="rect" href="classPerception.html#adc23cc0d2e3ae4d8c10c46e6841c36e8" title=" " alt="" coords="459,5,633,31"/>
<area shape="poly" title=" " alt="" coords="668,35,633,31,634,26,668,30"/>
<area shape="rect" href="classPerception.html#a7c6f9e4953d3780c1827f3cc0cbed09e" title="Callback function for the lidar topic." alt="" coords="221,31,411,56"/>
<area shape="poly" title=" " alt="" coords="667,46,411,46,411,41,667,41"/>
<area shape="poly" title=" " alt="" coords="445,32,411,36,411,30,444,27"/>
<area shape="rect" href="classPerception.html#a8bcf74df62599f91509d3fd2df14c5f7" title="Construct a new Perception object." alt="" coords="5,31,173,56"/>
<area shape="poly" title=" " alt="" coords="208,46,174,46,174,41,208,41"/>
</map>
</div>

</div>
</div>
<a id="a608edc26ec08b8d2ddd8f5c4cb53f78d" name="a608edc26ec08b8d2ddd8f5c4cb53f78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608edc26ec08b8d2ddd8f5c4cb53f78d">&#9670;&#160;</a></span>get_clusters_centers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Utils::get_clusters_centers </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *&#160;</td>
          <td class="paramname"><em>cluster_clouds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pcl::PointXYZI &gt; *&#160;</td>
          <td class="paramname"><em>clusters_centers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract the center of each cluster. </p>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00018">18</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>    {</div>
<div class="line"><span class="lineno">   21</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> cluster : *cluster_clouds)</div>
<div class="line"><span class="lineno">   22</span>        {</div>
<div class="line"><span class="lineno">   23</span>            <span class="keywordflow">if</span> (!cluster || cluster-&gt;empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>            <span class="comment">// Compute the centroid of the cluster</span></div>
<div class="line"><span class="lineno">   26</span>            pcl::CentroidPoint&lt;pcl::PointXYZI&gt; centroid_filter;</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; point : cluster-&gt;points)</div>
<div class="line"><span class="lineno">   28</span>            {</div>
<div class="line"><span class="lineno">   29</span>                centroid_filter.add(point);</div>
<div class="line"><span class="lineno">   30</span>            }</div>
<div class="line"><span class="lineno">   31</span>            pcl::PointXYZI centroid;</div>
<div class="line"><span class="lineno">   32</span>            centroid_filter.get(centroid);</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>            <span class="comment">// Add the center point to the clusters_centers cloud</span></div>
<div class="line"><span class="lineno">   35</span>            clusters_centers-&gt;push_back(centroid);</div>
<div class="line"><span class="lineno">   36</span>        }</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>    }</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_a608edc26ec08b8d2ddd8f5c4cb53f78d_icgraph.png" border="0" usemap="#anamespaceUtils_a608edc26ec08b8d2ddd8f5c4cb53f78d_icgraph" alt=""/></div>
<map name="anamespaceUtils_a608edc26ec08b8d2ddd8f5c4cb53f78d_icgraph" id="anamespaceUtils_a608edc26ec08b8d2ddd8f5c4cb53f78d_icgraph">
<area shape="rect" title="Extract the center of each cluster." alt="" coords="681,23,820,63"/>
<area shape="rect" href="classPerception.html#adc23cc0d2e3ae4d8c10c46e6841c36e8" title=" " alt="" coords="459,5,633,31"/>
<area shape="poly" title=" " alt="" coords="667,36,633,31,634,26,668,30"/>
<area shape="rect" href="classPerception.html#a7c6f9e4953d3780c1827f3cc0cbed09e" title="Callback function for the lidar topic." alt="" coords="221,31,411,56"/>
<area shape="poly" title=" " alt="" coords="667,46,411,46,411,41,667,41"/>
<area shape="poly" title=" " alt="" coords="445,32,411,36,411,30,444,27"/>
<area shape="rect" href="classPerception.html#a8bcf74df62599f91509d3fd2df14c5f7" title="Construct a new Perception object." alt="" coords="5,31,173,56"/>
<area shape="poly" title=" " alt="" coords="208,46,174,46,174,41,208,41"/>
</map>
</div>

</div>
</div>
<a id="a8cd0223b3bcd872ec13a3dbfbda3f27a" name="a8cd0223b3bcd872ec13a3dbfbda3f27a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd0223b3bcd872ec13a3dbfbda3f27a">&#9670;&#160;</a></span>ground_align()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Utils::ground_align </td>
          <td>(</td>
          <td class="paramtype">pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &amp;&#160;</td>
          <td class="paramname"><em>cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pcl::ModelCoefficients::Ptr &amp;&#160;</td>
          <td class="paramname"><em>coefficients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00117">117</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>                                                                                                    {</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">if</span> (coefficients-&gt;values.size() != 4) {</div>
<div class="line"><span class="lineno">  120</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;Invalid coefficients size: &quot;</span> &lt;&lt; coefficients-&gt;values.size() &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  122</span>        }</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>        Eigen::Vector3f plane_normal(coefficients-&gt;values[0],</div>
<div class="line"><span class="lineno">  125</span>                                    coefficients-&gt;values[1],</div>
<div class="line"><span class="lineno">  126</span>                                    coefficients-&gt;values[2]);</div>
<div class="line"><span class="lineno">  127</span>        plane_normal.normalize();</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        Eigen::Quaternionf q = Eigen::Quaternionf::FromTwoVectors(plane_normal, Eigen::Vector3f::UnitZ());</div>
<div class="line"><span class="lineno">  130</span>        Eigen::Matrix3f rotation_matrix = q.toRotationMatrix();</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordtype">float</span> d = coefficients-&gt;values[3];</div>
<div class="line"><span class="lineno">  133</span>        Eigen::Vector3f point_on_plane = -d * plane_normal;</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        Eigen::Vector3f rotated_point = rotation_matrix * point_on_plane;</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>        Eigen::Matrix4f transform = Eigen::Matrix4f::Identity();</div>
<div class="line"><span class="lineno">  138</span>        transform.block&lt;3,3&gt;(0,0) = rotation_matrix;</div>
<div class="line"><span class="lineno">  139</span>        transform.block&lt;3,1&gt;(0,3) = -rotated_point;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        pcl::transformPointCloud(*cloud, *cloud, transform);</div>
<div class="line"><span class="lineno">  142</span>    }</div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_a8cd0223b3bcd872ec13a3dbfbda3f27a_icgraph.png" border="0" usemap="#anamespaceUtils_a8cd0223b3bcd872ec13a3dbfbda3f27a_icgraph" alt=""/></div>
<map name="anamespaceUtils_a8cd0223b3bcd872ec13a3dbfbda3f27a_icgraph" id="anamespaceUtils_a8cd0223b3bcd872ec13a3dbfbda3f27a_icgraph">
<area shape="rect" title=" " alt="" coords="681,5,825,31"/>
<area shape="rect" href="classPerception.html#adc23cc0d2e3ae4d8c10c46e6841c36e8" title=" " alt="" coords="459,5,633,31"/>
<area shape="poly" title=" " alt="" coords="667,21,633,21,633,15,667,15"/>
<area shape="rect" href="classPerception.html#a7c6f9e4953d3780c1827f3cc0cbed09e" title="Callback function for the lidar topic." alt="" coords="221,5,411,31"/>
<area shape="poly" title=" " alt="" coords="445,21,411,21,411,15,445,15"/>
<area shape="rect" href="classPerception.html#a8bcf74df62599f91509d3fd2df14c5f7" title="Construct a new Perception object." alt="" coords="5,5,173,31"/>
<area shape="poly" title=" " alt="" coords="208,21,174,21,174,15,208,15"/>
</map>
</div>

</div>
</div>
<a id="a1371239b03263e524107115fb35d8abc" name="a1371239b03263e524107115fb35d8abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1371239b03263e524107115fb35d8abc">&#9670;&#160;</a></span>motion_correction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Utils::motion_correction </td>
          <td>(</td>
          <td class="paramtype">pcl::PointCloud&lt; <a class="el" href="structPointXYZColorScore.html">PointXYZColorScore</a> &gt;::Ptr&#160;</td>
          <td class="paramname"><em>cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>yaw_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Correct the motion of the points in the final map. </p>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00103">103</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  104</span>    {</div>
<div class="line"><span class="lineno">  105</span>        <span class="comment">// Estimate the motion of the points</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordtype">double</span> theta = -yaw_rate * dt; <span class="comment">// Estimate DSK delay</span></div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        <span class="comment">// Apply the estimated motion to the points</span></div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : cloud-&gt;points)</div>
<div class="line"><span class="lineno">  110</span>        {</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordtype">double</span> dx = vx * dt, dy = vy * dt;</div>
<div class="line"><span class="lineno">  112</span>            p.x = p.x * std::cos(theta) - p.y * std::sin(theta) - dx;</div>
<div class="line"><span class="lineno">  113</span>            p.y = p.x * std::sin(theta) + p.y * std::cos(theta) - dy;</div>
<div class="line"><span class="lineno">  114</span>        }</div>
<div class="line"><span class="lineno">  115</span>    } </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab562f18f1406da1ae9ac231637e6e866" name="ab562f18f1406da1ae9ac231637e6e866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab562f18f1406da1ae9ac231637e6e866">&#9670;&#160;</a></span>ReadFunction() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ArgType , typename ValType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void Utils::ReadFunction </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArgType *&amp;&#160;</td>
          <td class="paramname"><em>_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ValType *&amp;&#160;</td>
          <td class="paramname"><em>_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_dimensions</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_multiplicity</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>specialized version of ReadFunction that takes an integer for _n (rather than an integer array) and reads in a 1D function </p>

<p class="definition">Definition at line <a class="el" href="ReadFunction_8hpp_source.html#l00112">112</a> of file <a class="el" href="ReadFunction_8hpp_source.html">ReadFunction.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>                                                              {</div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordtype">int</span>* n;</div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_function" href="namespaceUtils.html#a4d073d9a45043da450c423994761cb9e">ReadFunction</a>(_in, _x, _y, n, _dimensions, _multiplicity);</div>
<div class="line"><span class="lineno">  116</span>    _n = n[0];</div>
<div class="line"><span class="lineno">  117</span>    <span class="keyword">delete</span>[] n;</div>
<div class="line"><span class="lineno">  118</span>}</div>
<div class="ttc" id="anamespaceUtils_html_a4d073d9a45043da450c423994761cb9e"><div class="ttname"><a href="namespaceUtils.html#a4d073d9a45043da450c423994761cb9e">Utils::ReadFunction</a></div><div class="ttdeci">void ReadFunction(std::istream &amp;_in, ArgType *&amp;_x, ValType *&amp;_y, int *&amp;_n, int _dimensions=1, int _multiplicity=1)</div><div class="ttdef"><b>Definition</b> <a href="ReadFunction_8hpp_source.html#l00028">ReadFunction.hpp:28</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_ab562f18f1406da1ae9ac231637e6e866_cgraph.png" border="0" usemap="#anamespaceUtils_ab562f18f1406da1ae9ac231637e6e866_cgraph" alt=""/></div>
<map name="anamespaceUtils_ab562f18f1406da1ae9ac231637e6e866_cgraph" id="anamespaceUtils_ab562f18f1406da1ae9ac231637e6e866_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,31"/>
<area shape="rect" href="namespaceUtils.html#a4d073d9a45043da450c423994761cb9e" title=" " alt="" coords="201,5,349,31"/>
<area shape="poly" title=" " alt="" coords="154,15,187,15,187,21,154,21"/>
</map>
</div>

</div>
</div>
<a id="a4d073d9a45043da450c423994761cb9e" name="a4d073d9a45043da450c423994761cb9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d073d9a45043da450c423994761cb9e">&#9670;&#160;</a></span>ReadFunction() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ArgType , typename ValType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void Utils::ReadFunction </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArgType *&amp;&#160;</td>
          <td class="paramname"><em>_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ValType *&amp;&#160;</td>
          <td class="paramname"><em>_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&amp;&#160;</td>
          <td class="paramname"><em>_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_dimensions</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_multiplicity</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a function from an input stream. Memory for _x and _y is allocated, and _n is set, based on the number of data points found in the stream _in. _x and _y should NOT point to allocated memory before being passed to <a class="el" href="namespaceUtils.html#a4d073d9a45043da450c423994761cb9e">ReadFunction()</a> because the memory will be lost (a memory leak). the multiplicity and dimensions can also be given, which specify how many columns are expected to be coordinates (dimension) and how many are values (multiplicity). so, for example, a complex function f(x), has _multiplicity = 2 and _dimension = 1. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_in</td><td>input stream to read data from. data is read while state of _in is good</td></tr>
    <tr><td class="paramname">_x</td><td>pointer through which coordinates are returned</td></tr>
    <tr><td class="paramname">_y</td><td>pointer through which values are returned </td></tr>
    <tr><td class="paramname">_n</td><td>pointer through which number of points in each dimension is returned</td></tr>
    <tr><td class="paramname">_dimensions</td><td>specifies the number of columns that are coordinates</td></tr>
    <tr><td class="paramname">_multiplicity</td><td>specifies the number of columns that make up a single value of the function </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>add actual multi-coordinate support </dd></dl>

<p class="definition">Definition at line <a class="el" href="ReadFunction_8hpp_source.html#l00028">28</a> of file <a class="el" href="ReadFunction_8hpp_source.html">ReadFunction.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>                                                              {</div>
<div class="line"><span class="lineno">   30</span>    ArgType *xbuffer1, *xbuffer2;</div>
<div class="line"><span class="lineno">   31</span>    ValType *ybuffer1, *ybuffer2;</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">//  READ IN DATA FROM FILE  //</span></div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> chunck = 1000;</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordtype">int</span> buffsize, buffsize_old;</div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordtype">int</span> i, j;</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>    std::string line;</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    buffsize = chunck;</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    xbuffer1 = <span class="keyword">new</span> ArgType[buffsize * _dimensions];</div>
<div class="line"><span class="lineno">   47</span>    ybuffer1 = <span class="keyword">new</span> ValType[buffsize * _multiplicity];</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>    i = 0;</div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">while</span> (getline(_in, line)) {</div>
<div class="line"><span class="lineno">   51</span>        <span class="comment">// if line is blank, skip it</span></div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">if</span> (line == <span class="stringliteral">&quot;&quot;</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   53</span>        std::vector&lt;std::string&gt; columns;</div>
<div class="line"><span class="lineno">   54</span>        boost::char_separator&lt;char&gt; sep(<span class="stringliteral">&quot; \t&quot;</span>);</div>
<div class="line"><span class="lineno">   55</span>        boost::tokenizer&lt;boost::char_separator&lt;char&gt;&gt; toks(line, sep);</div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = toks.begin(); it != toks.end(); ++it)</div>
<div class="line"><span class="lineno">   57</span>            columns.push_back(*it);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>        <span class="comment">// if first column starts with a #, this line is a comment</span></div>
<div class="line"><span class="lineno">   60</span>        <span class="comment">// and we should skip it.</span></div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">if</span> (columns.size() &gt; 0 &amp;&amp; columns[0].find(<span class="charliteral">&#39;#&#39;</span>) == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>        <span class="keywordflow">if</span> (i == buffsize - 1)  <span class="comment">// this &quot;grows&quot; the buffer</span></div>
<div class="line"><span class="lineno">   64</span>        {</div>
<div class="line"><span class="lineno">   65</span>            buffsize_old = buffsize;</div>
<div class="line"><span class="lineno">   66</span>            buffsize = buffsize + chunck;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>            xbuffer2 = <span class="keyword">new</span> ArgType[buffsize * _dimensions];</div>
<div class="line"><span class="lineno">   69</span>            std::copy(xbuffer1, xbuffer1 + buffsize_old * _dimensions,</div>
<div class="line"><span class="lineno">   70</span>                      xbuffer2);</div>
<div class="line"><span class="lineno">   71</span>            <span class="keyword">delete</span>[] xbuffer1;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>            ybuffer2 = <span class="keyword">new</span> ValType[buffsize * _multiplicity];</div>
<div class="line"><span class="lineno">   74</span>            std::copy(ybuffer1, ybuffer1 + buffsize_old * _multiplicity,</div>
<div class="line"><span class="lineno">   75</span>                      ybuffer2);</div>
<div class="line"><span class="lineno">   76</span>            <span class="keyword">delete</span>[] ybuffer1;</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>            xbuffer1 = xbuffer2;</div>
<div class="line"><span class="lineno">   79</span>            ybuffer1 = ybuffer2;</div>
<div class="line"><span class="lineno">   80</span>        }</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">for</span> (j = 0; j &lt; _dimensions; j++)</div>
<div class="line"><span class="lineno">   83</span>            xbuffer1[i * _dimensions + j] =</div>
<div class="line"><span class="lineno">   84</span>                boost::lexical_cast&lt;ArgType&gt;(columns[j]);</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">for</span> (j = 0; j &lt; _multiplicity; j++)</div>
<div class="line"><span class="lineno">   86</span>            ybuffer1[i * _multiplicity + j] =</div>
<div class="line"><span class="lineno">   87</span>                boost::lexical_cast&lt;ValType&gt;(columns[j + _dimensions]);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        i++;</div>
<div class="line"><span class="lineno">   90</span>    }</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    n = i;</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   96</span>    _n = <span class="keyword">new</span> <span class="keywordtype">int</span>[_dimensions];</div>
<div class="line"><span class="lineno">   97</span>    _x = <span class="keyword">new</span> ArgType[n * _dimensions];</div>
<div class="line"><span class="lineno">   98</span>    _y = <span class="keyword">new</span> ValType[n * _multiplicity];</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">for</span> (j = 0; j &lt; n * _dimensions; j++) _x[j] = xbuffer1[j];</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">for</span> (j = 0; j &lt; n * _multiplicity; j++) _y[j] = ybuffer1[j];</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">for</span> (j = 0; j &lt; _dimensions; j++) _n[j] = n;</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    <span class="keyword">delete</span>[] xbuffer1;</div>
<div class="line"><span class="lineno">  105</span>    <span class="keyword">delete</span>[] ybuffer1;</div>
<div class="line"><span class="lineno">  106</span>}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_a4d073d9a45043da450c423994761cb9e_icgraph.png" border="0" usemap="#anamespaceUtils_a4d073d9a45043da450c423994761cb9e_icgraph" alt=""/></div>
<map name="anamespaceUtils_a4d073d9a45043da450c423994761cb9e_icgraph" id="anamespaceUtils_a4d073d9a45043da450c423994761cb9e_icgraph">
<area shape="rect" title=" " alt="" coords="201,5,349,31"/>
<area shape="rect" href="namespaceUtils.html#ab562f18f1406da1ae9ac231637e6e866" title=" " alt="" coords="5,5,153,31"/>
<area shape="poly" title=" " alt="" coords="187,21,154,21,154,15,187,15"/>
</map>
</div>

</div>
</div>
<a id="ab6a38cc6704d6a2d8005ba4ee91852f5" name="ab6a38cc6704d6a2d8005ba4ee91852f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a38cc6704d6a2d8005ba4ee91852f5">&#9670;&#160;</a></span>reconstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Utils::reconstruction </td>
          <td>(</td>
          <td class="paramtype">pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr&#160;</td>
          <td class="paramname"><em>cloud_plane</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pcl::PointCloud&lt; pcl::PointXYZI &gt;::Ptr &gt; *&#160;</td>
          <td class="paramname"><em>cluster_clouds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pcl::PointXYZI &gt; *&#160;</td>
          <td class="paramname"><em>clusters_centers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recover falsely ground filtered points. </p>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00078">78</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   79</span>                                                                  {</div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;clusters_centers-&gt;size(); ++i) {</div>
<div class="line"><span class="lineno">   81</span>            pcl::PointXYZI center = clusters_centers-&gt;at(i);</div>
<div class="line"><span class="lineno">   82</span>            </div>
<div class="line"><span class="lineno">   83</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> point : cloud_plane-&gt;points) {</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>                <span class="comment">// Check if the point lies inside the cylinder</span></div>
<div class="line"><span class="lineno">   86</span>                <span class="keywordtype">double</span> dx = point.x - center.x;</div>
<div class="line"><span class="lineno">   87</span>                <span class="keywordtype">double</span> dy = point.y - center.y;</div>
<div class="line"><span class="lineno">   88</span>                <span class="keywordtype">double</span> sq_dist = dx * dx + dy * dy;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>                <span class="keywordflow">if</span> (sq_dist &lt;= radius*radius) {</div>
<div class="line"><span class="lineno">   91</span>                    <span class="comment">// Add the point to the filtered cloud</span></div>
<div class="line"><span class="lineno">   92</span>                    cluster_clouds-&gt;at(i)-&gt;points.push_back(point);</div>
<div class="line"><span class="lineno">   93</span>                }</div>
<div class="line"><span class="lineno">   94</span>            }</div>
<div class="line"><span class="lineno">   95</span>        }</div>
<div class="line"><span class="lineno">   96</span>    }</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespaceUtils_ab6a38cc6704d6a2d8005ba4ee91852f5_icgraph.png" border="0" usemap="#anamespaceUtils_ab6a38cc6704d6a2d8005ba4ee91852f5_icgraph" alt=""/></div>
<map name="anamespaceUtils_ab6a38cc6704d6a2d8005ba4ee91852f5_icgraph" id="anamespaceUtils_ab6a38cc6704d6a2d8005ba4ee91852f5_icgraph">
<area shape="rect" title="Recover falsely ground filtered points." alt="" coords="459,5,612,31"/>
<area shape="rect" href="classPerception.html#a7c6f9e4953d3780c1827f3cc0cbed09e" title="Callback function for the lidar topic." alt="" coords="221,5,411,31"/>
<area shape="poly" title=" " alt="" coords="445,21,411,21,411,15,445,15"/>
<area shape="rect" href="classPerception.html#a8bcf74df62599f91509d3fd2df14c5f7" title="Construct a new Perception object." alt="" coords="5,5,173,31"/>
<area shape="poly" title=" " alt="" coords="208,21,174,21,174,15,208,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
